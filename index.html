<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zenless Zone Zero Analyzer</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>Zenless Zone Zero — Damage Inputs + “Diminishing Returns” Analyzer</h1>

  <div class="card" style="margin-top:15px;">
    <div class="row">
      <label>Save <input id="saveName" value="1"/></label>
      <label>
        Mode
        <select id="mode">
          <option value="standard">Standard</option>
          <option value="anomaly">Anomaly</option>
          <option value="rupture">Rupture</option>
          <option value="hybrid">Hybrid (Standard + Anomaly)</option>
        </select>
      </label>
    </div>

    <div class="row" style="margin-top:10px;">
      <button class="btn primary" id="btnSave">Save</button>
      <button class="btn" id="btnLoad">Load</button>
      <button class="btn" id="btnExport">Export JSON</button>
      <button class="btn" id="btnImport">Import JSON</button>
      <input id="importFile" type="file" accept="application/json" class="hidden" />
      <button class="btn" id="btnReset">Reset</button>
    </div>
  </div>

  <h2>Agent Stats</h2>
  <div class="card">
    <div class="form">
      <div class="form-row cols-3">
        <label>Agent Level <input id="agentLevel" type="number" value="60" min="1" step="1"/></label>
        <label>
          Attribute
          <select id="attribute">
            <option value="physical">Physical</option>
            <option value="fire">Fire</option>
            <option value="ice">Ice</option>
            <option value="electric">Electric</option>
            <option value="ether">Ether</option>
          </select>
        </label>
        <label>Total ATK <input id="atkBase" type="number" value="1000" min="0" step="1"/></label>
      </div>

      <div class="form-row cols-2">
        <label>Crit Rate (%) <input id="critRatePct" type="number" value="5" min="0" max="100" step="0.1"/></label>
        <label>Crit DMG (%) <input id="critDmgPct" type="number" value="50" min="0" step="0.1"/></label>
      </div>

      <div class="form-row cols-3">
        <label>Generic DMG (%) <input id="dmgGenericPct" type="number" value="0" step="0.1"/></label>
        <label>Attribute DMG (%) <input id="dmgAttrPct" type="number" value="0" step="0.1"/></label>
        <label>Skill DMG (%) <input id="dmgSkillTypePct" type="number" value="0" step="0.1"/></label>
      </div>

      <div class="form-row cols-3">
        <label>PEN Ratio (%) <input id="penRatioPct" type="number" value="0" step="0.1"/></label>
        <label>PEN <input id="penFlat" type="number" value="0" step="1"/></label>
        <label>Skill Multiplier (%) <input id="skillMultPct" type="number" value="100" min="0" step="0.1"/></label>
        <label>DEF Ignore (%) <input id="defIgnorePct" type="number" value="0" step="0.1"/></label>
      </div>
    </div>
  </div>

  <h2 id="anomalyHeader">Agent Stats — Anomaly</h2>
  <div class="card" id="anomalyCard">
    <div class="form">
      <div class="form-row cols-2">
        <label>
          Anomaly Type
          <select id="anomType">
            <option value="auto" selected>Auto</option>
            <option value="assault">Assault (Physical)</option>
            <option value="burn">Burn (Fire)</option>
            <option value="shock">Shock (Electric)</option>
            <option value="shatter">Shatter (Ice)</option>
            <option value="corruption">Corruption (Ether)</option>
          </select>
        </label>
        <label>Anomaly Proficiency <input id="anomProf" type="number" value="0" step="1"/></label>
      </div>

      <div class="form-row cols-3">
        <label>Anomaly DMG (%) <input id="anomDmgPct" type="number" value="0" step="0.1"/></label>
        <label>Disorder DMG (%) <input id="disorderDmgPct" type="number" value="0" step="0.1"/></label>
        <label style="display:flex; align-items:center; gap:10px;">
          <span>Allow anomaly crit (special cases)</span>
          <input id="anomAllowCrit" type="checkbox" />
        </label>
      </div>

      <div class="form-row cols-3">
        <label>Tick Count (override)
          <input id="anomTickCount" type="number" value="" min="1" step="1" placeholder="Auto"/>
        </label>
        <label>Tick Interval (sec, override)
          <input id="anomTickIntervalSec" type="number" value="" min="0" step="0.05" placeholder="Auto"/>
        </label>
        <label>
          Anomaly Info
          <div class="muted" style="margin-top:6px;">
            <span class="pill" id="anomKindPill">—</span>
            <span class="pill" id="anomCanCritPill">—</span>
          </div>
        </label>
      </div>

      <div class="form-row cols-3">
        <label>
          Disorder: Previous Anomaly
          <select id="disorderPrevType">
            <option value="auto" selected>Auto (use current Anomaly Type)</option>
            <option value="burn">Burn</option>
            <option value="shock">Shock</option>
            <option value="corruption">Corruption</option>
            <option value="shatter">Frozen (Ice)</option>
            <option value="assault">Flinch (Physical)</option>
          </select>
        </label>
        <label>Disorder: Time Passed (sec)
          <input id="disorderTimePassedSec" type="number" value="0" min="0" step="0.1" />
        </label>
        <label class="muted" style="align-self:end;">Disorder uses the previous anomaly + time passed.</label>
      </div>
    </div>
  </div>

  <h2 id="ruptureHeader">Agent Stats — Rupture</h2>
  <div class="card" id="ruptureCard">
    <div class="form">
      <div class="form-row cols-2">
        <label>Sheer Force <input id="sheerForce" type="number" value="0" step="1"/></label>
        <label>Sheer DMG Bonus (%) <input id="sheerDmgBonusPct" type="number" value="0" step="0.1"/></label>
      </div>
    </div>
  </div>

  <h2>Enemy</h2>
  <div class="card">
    <div class="form">
      <div class="form-row cols-3">
        <label>Enemy Level <input id="enemyLevel" type="number" value="70" min="1" step="1"/></label>
        <label>Enemy DEF <input id="enemyDef" type="number" value="953" min="0" step="1"/></label>
        <label>Attribute RES (%) <input id="enemyResAllPct" type="number" value="0" step="0.1"/></label>
      </div>

      <div class="form-row cols-2">
        <label>DEF Reduction (%) <input id="defReductionPct" type="number" value="0" step="0.1"/></label>
      </div>

      <div class="form-row cols-3">
        <label>DMG Taken (%) <input id="dmgTakenPct" type="number" value="0" step="0.1"/></label>
        <label>Stunned?
          <select id="isStunned">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
        </label>
        <label>
          Stunned Multiplier (%)
          <input id="stunPct" type="number" value="100" step="1" />
        </label>
      </div>
    </div>
  </div>

  <h2>Outputs + Marginal Value</h2>
  <div class="card">
    <div class="kpi" id="kpi"></div>

    <div class="hr"></div>

    <table>
      <thead>
        <tr>
          <th>Stat</th>
          <th>Δ Stat</th>
          <th>New Output</th>
          <th>DMG Gain</th>
          <th>DMG Gain (%)</th>
        </tr>
      </thead>
      <tbody id="marginalBody"></tbody>
    </table>

    <div class="hr"></div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
